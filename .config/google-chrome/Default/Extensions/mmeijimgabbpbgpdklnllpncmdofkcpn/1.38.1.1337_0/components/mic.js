!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=219)}({219:function(e,t,r){"use strict";r.r(t);r(25),r(26),r(39),r(27);angular.module("castifyExt.MicApp",["castifyExt.mic.ui","ngMaterial"]),angular.module("castifyExt.mic.ui",["w69b.webrtc"]).controller("MicStreamCtrl",["$scope","webrtc","$window","$log",function(e,t,r,n){function o(){t.hasCamera().then(function(o){t.getUserMedia({audio:!0,video:o}).then(function(t){e.state="success";var n=!!t.getVideoTracks().length;t.getTracks().forEach(function(e){e.stop()}),r.clGotStream&&(r.clGotStream(),r.close()),!n&&o&&(e.state="error")},function(t){n.info(t),e.state="error"})})}e.state="init",e.record=o,o()}])},25:function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};angular.module("castifyExt.deployConfig",[]).provider("deployConfig",function(){let e=n({apiUrl:"https://api.screencastify.com/api",clientId:"242262968495-o42n5tqeo08dsa75p3j4dk1k61t05ln3.apps.googleusercontent.com",scopes:chrome.runtime.getManifest().oauth2.scopes,redirectUri:"https://www.screencastify.com/oauth2postback",editorOpenUri:"https://editor.screencastify.com/open/drive",notificationUri:"https://us-central1-castify-notifications-prod.cloudfunctions.net/api/userNotification/",uploadServiceURL:"https://ingress.screencastify.com/api/uploadService",exportServiceURL:"https://ingress.screencastify.com/api/exportService",firebase:{apiKey:"AIzaSyDraAcnfh7TewzYJS9yt8Togm6_VzB_RJE",authDomain:"castify-storage.firebaseapp.com",databaseURL:"wss://castify-storage.firebaseio.com",projectId:"castify-storage",storageBucket:"castify-storage.appspot.com",messagingSenderId:"37637381719"}},{enableInlinePopupSupport:!1});return n({},e,{$get:function(){return e}})})},26:function(e,t,r){"use strict";angular.module("w69b.promiseTool",[]).factory("promiseTool",["$q","$timeout",function(e,t){var r={wrapChromeError:function(t,r){return function(){var n=Array.prototype.slice.call(arguments,0),o=e.defer();return n.push(function(e){chrome.runtime.lastError?o.reject(chrome.runtime.lastError):o.resolve(e)}),t.apply(r,n),o.promise}},wrapCallbacks:function(t,r){return function(){var n=Array.prototype.slice.call(arguments,0),o=e.defer();return n.push(o.resolve.bind(o)),n.push(o.reject.bind(o)),t.apply(r,n),o.promise}},serializer:function(){var t=null,r=function(r){var n=e.defer();return(t||e.when()).then(function(){(r.call()||e.when()).then(e=>n.resolve(e),e=>n.reject(e))}),(t=n.promise.catch(()=>null)).then(function(){t=null}),n.promise};return r.wrap=function(e){return function(){return r(e.bind(this,...arguments))}},r},withTimeout:function(r,n,o){o||(o=angular.noop);var i=e.defer(),c=t(function(){var e=o();angular.isDefined(e)?i.resolve(e):i.reject("timeout"),i=null},n);function u(){t.cancel(c),c=null}return r().then(function(){u(),i&&i.resolve.apply(i,arguments)},function(){u(),i&&i.reject.apply(i,arguments)}),i.promise}};return r}])},27:function(e,t,r){"use strict";angular.module("w69b.spawn",[]).factory("spawn",["$q",function(e){function t(t,r){var n=r?Promise.reject.bind(Promise):e.reject.bind(e),o=r?Promise.resolve.bind(Promise):e.when.bind(e);function i(e,t){var r;try{r=e(t)}catch(e){return n(e)}return r.done?o(r.value):o(r.value).then(u,a)}var c=t(),u=i.bind(null,c.next.bind(c)),a=i.bind(null,c.throw.bind(c));return u()}return t.wrap=function(e){return function(){var r=arguments;return t(e.bind(this,...r))}},t}])},39:function(e,t,r){"use strict";angular.module("w69b.webrtc",["w69b.promiseTool","w69b.spawn"]).factory("webrtc",["promiseTool","$window","$q","spawn",function(e,t,r,n){var o={},i=t.navigator;function c(e){return e.some(function(e){return!!e.label})}return o.getUserMedia=e.wrapCallbacks(i.getUserMedia||i.webkitGetUserMedia||i.mozGetUserMedia||i.msGetUserMedia,i),i.mediaDevices&&i.mediaDevices.enumerateDevices?o.getSources=function(){return r.when(i.mediaDevices.enumerateDevices()).then(function(e){return e.filter(function(e){return e.kind.endsWith("input")}).map(function(e){var t={id:e.deviceId,label:e.label};return t.kind=e.kind.substring(0,e.kind.length-5),t})})}:o.getSources=e.wrapCallbacks(MediaStreamTrack.getSources,MediaStreamTrack),o.getSourcesByKind=function(e){return o.getSources().then(function(t){return t.filter(function(t){return t.kind===e})})},o.getVideoSources=function(){return o.getSourcesByKind("video")},o.getAudioSources=function(){return o.getSourcesByKind("audio")},o.hasCamera=function(){return o.getVideoSources().then(function(e){return e.length>0})},o.hasMicrophone=function(){return o.getAudioSources().then(function(e){return e.length>0})},o.hasVideoAccess=function(){return o.getVideoSources().then(c)},o.hasAudioAccess=function(){return o.getAudioSources().then(c)},o.getCameraAndMicPermission=n.wrap(function*(){let e=yield o.hasCamera(),t=!1,r=!1;try{let n=yield o.getUserMedia({audio:!0,video:e});r=!!n.getVideoTracks().length,t=!!n.getAudioTracks().length,n.getTracks().forEach(function(e){e.stop()})}catch(e){}return{video:r,audio:t}}),o}])}});